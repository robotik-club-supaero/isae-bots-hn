<!--
exemple de lancement: 
roslaunch main.launch method:='sim'
-->


<launch>  
	<arg name='BR' default="None" />
	<arg name='ACT' default="None" />
	<arg name='LIDAR' default="None" />
	
	<rosparam param="BR" subst_value="True">$(arg BR)</rosparam>
	<rosparam param="ACT" subst_value="True">$(arg ACT)</rosparam>
	<rosparam param="LIDAR" subst_value="True">$(arg LIDAR)</rosparam>
	

	<!-- Disjonction de cas -->

	<group if="$(eval arg('BR') != 'None')"> <!-- La carte Base Roulante est presente -->
		<!-- on est sur le vrai robot -->
		<node pkg="rosserial_python" type="serial_node.py" name="SerialNodeBR" output="screen">
			<param name="port" value="$(eval arg('BR'))"/>
			<param name="baud" value="115200"/>
		</node>
	</group>
	<group if="$(eval arg('ACT') != 'None')"> <!-- La carte Actionneurs est presente -->
		<node pkg="rosserial_python" type="serial_node.py" name="SerialNodeACT" output="screen">
			<param name="port" value="$(eval arg('ACT'))"/>
			<param name="baud" value="115200"/>
		</node>
		<node pkg="isae_robotics_sonar" type="SonarNode.py" name="SonarNode" output="screen" />
	</group>
	
	<group if="$(eval arg('LIDAR') != 'None')"> <!-- Le LIDAR est present -->
		<node pkg="hokuyo_node" type="hokuyo_node" name="Hokuyo" output="screen" >
			<param name="port" type="string" value="$(eval arg('LIDAR'))"/>
		</node>
		<node pkg="isae_robotics_lidar" type="LidarNode.py" name="LidarNode" output="screen" />
		<node pkg="isae_robotics_sensors" type="SensorsNode.py" name="SensorNode" output="screen" />
	</group>

	<!-- deplacements -->
	<node name="DisplacementNode" pkg="isae_robotics_displacement"  type="DisplacementNode.py" output="screen" cwd="node" required="true"/>

	<!-- strategie -->
	<node name="DecisionNode" pkg="isae_robotics_strat"  type="titanic_dn.py" output="screen" cwd="node" required="true"/>
	<node name="ActionNode" pkg="isae_robotics_strat"  type="titanic_an.py" output="screen" cwd="node" required="true"/>

	<!-- isb -->
	<node name="IsbNode" pkg="isae_robotics_isb"  type="isbNode.py" output="screen" cwd="node" required="true"/>

	<!-- points -->
	<node name="PointsNode" pkg="isae_robotics_lcd"  type="pointsNode.py" output="screen" cwd="node" required="true"/>
	
</launch>
